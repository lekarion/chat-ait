#
#   targets.yml
#   ChatAIT
#

name: ChatAIT
options:
  bundleIdPrefix: com.olegyaros.chatait
  deploymentTarget:
    iOS: 14.0
  settingPresets: none

configs:
  Debug: none
  Release: none

configFiles:
  Debug: Configurations/Debug.xcconfig
  Release: Configurations/Release.xcconfig


# templates
targetTemplates:
  CommonTarget:
    type: application
    platform: iOS
    productName: ${target_name}
    settings:
      GENERATE_INFOPLIST_FILE: YES
    sources:
      - "${target_name}"

  CommonTargetTests:
    type: bundle.unit-test
    platform: iOS
    settings:
      PRODUCT_BUNDLE_IDENTIFIER: com.olegyaros.${target_name}
      PRODUCT_NAME: ${target_name}
    preBuildScripts:
      - script: "BASE_TARGET_NAME=`echo \"${target_name}\" | sed -e 's/Tests\\$//'`; \"${PODS_ROOT}/Sourcery/bin/sourcery\" --sources \"${SRCROOT}/$BASE_TARGET_NAME\" --templates \"${SRCROOT}/${target_name}/Sourcery/Template\" --output \"${SRCROOT}/${target_name}/Sourcery/Generated\""
        name: Sourcery
    sources:
      - "${target_name}"


schemeTemplates:
  CommonScheme:
    build:
      targets:
        ${scheme_name}: all
    run:
      config: Debug
    test:
      config: Debug
    profile:
      config: Release
    analyze:
      config: Release
    archive:
      config: Release


# targets & schemes
targets:
  ChatAIT: 
    templates: [CommonTarget]
  ChatAITTests:
    templates: [CommonTargetTests]
    dependencies:
      - target: ChatAIT

schemes:
  ChatAIT: 
    templates: [CommonScheme]
